(function(t,e,a,i){var n="ontouchstart"in e,o=n?"touchstart":"mousedown",u=n?"touchmove":"mousemove",l=n?"touchcancel":"mouseup",d=function(t){var e=Math.floor(t/3600),a=Math.floor(t%3600/60),i=Math.ceil(t%3600%60);return(0==e?"":e>0&&e.toString().length<2?"0"+e+":":e+":")+(a.toString().length<2?"0"+a:a)+":"+(i.toString().length<2?"0"+i:i)},s=function(t){var e=a.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/"+t.split(".").pop().toLowerCase()+";").replace(/no/,""))};t.fn.audioPlayer=function(e){e=t.extend({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume"},e);var a={},i={playPause:"playpause",playing:"playing",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",mute:"mute",mini:"mini"};for(var r in i)a[r]=e.classPrefix+"-"+i[r];return this.each(function(){if("audio"!=t(this).prop("tagName").toLowerCase())return!1;var i=t(this),r=i.attr("src"),v=i.get(0).getAttribute("autoplay"),m=(v=""===v||"autoplay"===v,i.get(0).getAttribute("loop")),c=(m=""===m||"loop"===m,!1);void 0===r?i.find("source").each(function(){if(r=t(this).attr("src"),void 0!==r&&s(r))return c=!0,!1}):s(r)&&(c=!0);var h=t('<div class="'+e.classPrefix+'">'+(c?t("<div>").append(i.eq(0).clone()).html():'<embed src="'+r+'" width="0" height="0" volume="100" autostart="'+v.toString()+'" loop="'+m.toString()+'" />')+'<div class="'+a.playPause+'" title="'+e.strPlay+'"><a href="#">'+e.strPlay+"</a></div></div>"),f=c?h.find("audio"):h.find("embed");f=f.get(0);if(c){h.find("audio").css({width:0,height:0,visibility:"hidden"}),h.append('<div class="'+a.time+" "+a.timeCurrent+'"></div><div class="'+a.bar+'"><div class="'+a.barLoaded+'"></div><div class="'+a.barPlayed+'"></div></div><div class="'+a.time+" "+a.timeDuration+'"></div><div class="'+a.volume+'"><div class="'+a.volumeButton+'" title="'+e.strVolume+'"><a href="#">'+e.strVolume+'</a></div><div class="'+a.volumeAdjust+'"><div><div></div></div></div></div>');var p=h.find("."+a.bar),y=h.find("."+a.barPlayed),g=(h.find("."+a.barLoaded),h.find("."+a.timeCurrent)),P=h.find("."+a.timeDuration),b=h.find("."+a.volumeButton),C=h.find("."+a.volumeAdjust+" > div"),E=0,w=function(t){theRealEvent=n?t.originalEvent.touches[0]:t,f.currentTime=Math.round(f.duration*(theRealEvent.pageX-p.offset().left)/p.width())},L=function(t){theRealEvent=n?t.originalEvent.touches[0]:t,f.volume=Math.abs((theRealEvent.pageY-(C.offset().top+C.height()))/C.height())},x=f.volume,M=f.volume=.111;Math.round(1e3*f.volume)/1e3==M?f.volume=x:h.addClass(a.noVolume),P.html("&hellip;"),g.text(d(0)),f.addEventListener("loadeddata",function(){P.text(d(f.duration)),C.find("div").height(100*f.volume+"%"),E=f.volume}),f.addEventListener("timeupdate",function(){g.text(d(f.currentTime)),y.width(f.currentTime/f.duration*100+"%")}),f.addEventListener("volumechange",function(){C.find("div").height(100*f.volume+"%"),f.volume>0&&h.hasClass(a.mute)&&h.removeClass(a.mute),f.volume<=0&&!h.hasClass(a.mute)&&h.addClass(a.mute)}),f.addEventListener("ended",function(){h.removeClass(a.playing)}),p.on(o,function(t){w(t),p.on(u,function(t){w(t)})}).on(l,function(){p.unbind(u)}),b.on("click",function(){return h.hasClass(a.mute)?(h.removeClass(a.mute),f.volume=E):(h.addClass(a.mute),E=f.volume,f.volume=0),!1}),C.on(o,function(t){L(t),C.on(u,function(t){L(t)})}).on(l,function(){C.unbind(u)})}else h.addClass(a.mini);v&&h.addClass(a.playing),h.find("."+a.playPause).on("click",function(){return h.hasClass(a.playing)?(t(this).attr("title",e.strPlay).find("a").html(e.strPlay),h.removeClass(a.playing),c?f.pause():f.Stop()):(t(this).attr("title",e.strPause).find("a").html(e.strPause),h.addClass(a.playing),c?f.play():f.Play()),!1}),i.replaceWith(h)}),this}})(jQuery,window,document);